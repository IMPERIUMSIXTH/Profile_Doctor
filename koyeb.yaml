name: profile-doctor
services:
  - name: backend
    dockerfile: backend/Dockerfile
    instance_type: free
    ports:
      - port: 8000
        protocol: http
    routes:
      - path: /
        port: 8000
    env:
      - key: DATABASE_URL
        secret: DATABASE_URL
    health_checks:
      - type: http
        port: 8000
        path: /
        interval: 30s
        timeout: 10s
        retries: 3
  - name: db
    docker: postgres:15
    instance_type: free
    env:
      - key: POSTGRES_USER
        value: postgres
      - key: POSTGRES_PASSWORD
        secret: POSTGRES_PASSWORD
      - key: POSTGRES_DB
        value: profile_doctor
  - name: redis
    docker: redis:7
    instance_type: free
